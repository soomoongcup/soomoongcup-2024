# 슈퍼넷팅 (14pts)

출제자: 김동주

## 문제

상명대학교 네트워크 관리팀에서 인턴으로 활동하는 수뭉이는 팀장님으로부터 한 가지 과제를 받았는데,**지금 학교 내에서 할당 되어있는 모든 IP 주소를 모두 알아내어 요약해 오는 것**이다.

수뭉이는 전산 로그를 조회하여 현재 학교 내에서 사용 중인 모든 IP 주소들을 알아 낼 수 있다.

조회한 전산 로그에는 현재 학교 내에서 사용 중인 모든 주소들이 CIDR 표기법으로 주어지며, 수뭉이는 조회한 주소들을 정리하여 **가장 적은 수의 CIDR 주소들로 현재 학교 내에서 사용 중인 모든 주소를 표현하려고 한다**.

## A.B.C.D/E (CIDR, Classless Inter-Domain Routing)

CIDR 주소는, 네 부분 중 사이에 점('.')으로 구분된 십진수 IP 주소, 슬래시('/') 문자, 그리고 0부터 32까지의 수로 구성되어 있다. A부터 D까지는 IPv4 주소와 동일하게 8비트씩 끊어 0부터 255까지인 10진수 수다. 슬래시 뒤에 오는 수(E)는 접두사 길이라고도 한다.

### CIDR 표기법과 IPv4 주소 그룹

CIDR 표기법을 사용하면 많은 범위의 IPv4 주소를 한 번에 표현할 수 있다. CIDR 표기법으로 나타낸 주소 A.B.C.D/E 에 대하여, 임의의 IPv4 주소 P의 첫 E 비트가 A.B.C.D와 동일하다면, P는 A.B.C.D/E에 포함된다고 할 수 있다.

### CIDR 주소의 정규화

주소를 CIDR 표기법으로 나타낼 때, 주소는 정규화 되어질 수 있다. 정규화란 32비트로 표현된 IPv4 주소에서 접두사의 길이에 해당하는 비트만을 남기고 모든 나머지 비트를 0으로 바꾼 것이다.

예시로 172.17.107.203/20 을 정규화 해보자.

먼저 172.17.107.203를 비트로 표현해보면 다음과 같다.

<table>
    <tbody>
        <tr>
            <td>10101100</td>
            <td>00010001</td>
            <td>01101011</td>
            <td>11001011</td>
        </tr>
        <tr>
            <td>172</td>
            <td>17</td>
            <td>107</td>
            <td>203</td>
        </tr>
        <tr>
            <td colspan=4>IPv4 주소 172.17.107.203 는 위와 같이 표현된다.</td>
        </tr>
    </tbody>
</table>

32 비트로 표현된 IPv4 주소에서 접두사의 길이에 해당하는 비트만을 남기고 모든 나머지 비트를 0으로 바꾸면 172.17.96.0/20 이 된다.

<table>
    <tbody>
        <tr>
            <td>10101100</td>
            <td>00010001</td>
            <td>0110</td>
            <td>1011</td>
            <td>11001011</td>
        </tr>
        <tr>
            <td colspan=3>접두사 (20 bits)</td>
            <td colspan=2>비트가 0으로 바뀌는 부분</td>
        </tr>
        <tr>
            <td>10101100</td>
            <td>00010001</td>
            <td colspan=2>0110 0000 </td>
            <td>00000000</td>
        </tr>
        <tr>
            <td>172</td>
            <td>17</td>
            <td colspan=2>96</td>
            <td>0</td>
        </tr>
        <tr>
            <td colspan=5>
            정규화 한 주소를 다시 CIDR 표기법으로 나타내면 172.17.96.0/20 이다.</td>
        </tr>
    </tbody>
</table>

## 입력

<p>첫 째줄에 테스트케이스의 개수 $T$가 주어진다.</p><p>각 테스트케이스의 첫 번째 줄에는 수뭉이가 조회하여 얻어낸 주소의 개수 $N$이 주어진다.</p><p>이어지는 $N$개의 줄에는 한 줄에 하나의 주소가 CIDR 표기법으로 주어진다.</p>

| 8pts (+8pts) | 14pts (+6pts)   |
| ------------ | --------------- |
| $T \leq 50$  | $T \leq 50$     |
| $N \leq 10$  | $N \leq 10,000$ |

## 출력

<p>테스트케이스 순서 대로 정답을 출력한다.</p><p>테스트케이스의 첫 줄은<code>Case #x</code>를 출력한다. x는 테스트케이스 번호이며 $1$부터 시작한다.</p><p>이어지는 줄에 가장 적은 수의 CIDR 주소들을 오름차순으로 출력한다.</p><blockquote><p>주소를 정렬하는 방법: 주소 $X$의 첫 번째 정수가 주소 $Y$의 첫 번째 정수보다 작거나, $X$와 $Y$의 첫 번째 정수가 같지만 $X$의 두 번째 정수가 $Y$의 두 번째 정수보다 작은 경우 주소 $X$가 다른 주소 $Y$보다 앞에 오게 됩니다.</p></blockquote>

## 예제 입력 1

```
3
2
10.1.2.3/8
10.2.3.4/17
2
10.2.3.4/9
10.128.2.3/9
10
224.147.224.186/18
58.45.85.53/14
52.56.134.139/26
52.227.82.227/22
83.250.251.44/13
83.250.12.64/16
58.40.52.11/14
52.22.138.56/23
238.223.58.151/27
58.32.52.11/13

```

## 예제 출력 1

```
Case #1
10.0.0.0/8
Case #2
10.0.0.0/8
Case #3
52.22.138.0/23
52.56.134.128/26
52.227.80.0/22
58.32.0.0/12
83.248.0.0/13
224.147.192.0/18
238.223.58.128/27

```
